<!DOCTYPE html>
<html>
    <head>
        <title>Monym</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- jQuery -->
        <script src="jquery.min.js"></script>

        <!-- Font Awesome -->
        <link rel="stylesheet" href="fontawesome/css/all.css">
        <script src="fontawesome/js/all.js"></script>

        <!-- DataTables -->
        <script src="datatables.min.js"></script>
        <link rel="stylesheet" href="datatables.min.css">

        <!-- Compiled CSS -->
        <link rel="stylesheet" href="bootstrap.css">

        <!-- Static JS -->
        <script src="bootstrap.min.js"></script>

        <!-- DataTables Scripting -->
        <script>
            $(document).ready(function()
            {
                $("#sonarr_series_table").DataTable({
                    // "pageLength": 999
                    paging: false,
                    scrollY: 500,
                    ordering: true
                });
            });
        </script>
    </head>
    <body class="bg-dark text-light">
        <header class="container-md">
            <h1 class="text-center"><i class="fas fa-desktop text-primary mr-2"></i>Monym</h1>
        </header>
        <div class="container-md bg-light text-dark rounded p-2">
            <!-- <h1 class="text-center">Sonarr</h1> -->
            <div class="row">
                <div class="col-md-auto">
                    <div class="w-100">
                        <img class="mx-auto" height="100px" src="images/sonarr_logo.png">
                    </div>
                </div>
                <div class="col-md">
                    <p class="bg-secondary text-dark container-fluid rounded p-2">Version: <%= info.version%> &nbsp; </p>
                    <p class="bg-secondary text-dark container-fluid rounded p-2">Operating System: <%= info.osName + " " + info.osVersion%></p>
                </div>
            </div>
            <div>
                <a class="btn btn-primary mb-2" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Toggle Table</a>
                <div class="collapse show" id="collapseExample">
                    <table id="sonarr_series_table" class="table table-hover table-dark table-bordered table-responsive">
                        <thead class="bg-primary text-center">
                            <tr>
                                <th>Show</th>
                                <th>Status</th>
                                <th>Network</th>
                                <th>On Plex</th>  
                            </tr>
                        </thead>
                        <tbody class="">
                            <% for(var i=0; i < series.length; i++) { %>
                            <tr>
                                <!-- <td data-order="<%= series[i].title %>" style="background-size: cover; background-image: url('<%= config.sonarr.url + ':' + config.sonarr.port + series[i].images[1].url %>');" class="align-middle"></td> -->
                                
                                <td class="w-50" data-search="<%= series[i].title %>" data-order="<%= series[i].title %>">
                                    <img class="img-fluid w-100" src="<%= config.sonarr.url + ':' + config.sonarr.port + series[i].images[1].url %>">
                                </td>
                                
                                <td class="align-middle"><%= series[i].status %></td>
                                <td class="align-middle"><%= series[i].network %></td>
                                <td class="w-50 align-middle" data-order="<%= (series[i].episodeFileCount / series[i].episodeCount)*100 %>%">
                                    <div class="text-center"><%= series[i].episodeFileCount %> / <%= series[i].episodeCount %></div>
                                    
                                    <div class="progress">
                                        
                                        <% if(series[i].episodeFileCount / series[i].episodeCount == 1) { %>
                                            <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: <%=series[i].episodeFileCount / series[i].episodeCount * 100%>%;" aria-valuenow="<%= series[i].episodeFileCount %>" aria-valuemin="0" aria-valuemax="<%= series[i].episodeCount %>"></div>
                                            
                                        <%} else {%>
                                            <div class="progress-bar progress-bar-striped progress-bar-animated bg-secondary text-dark" role="progressbar" style="width: <%=series[i].episodeFileCount / series[i].episodeCount * 100%>%;" aria-valuenow="<%= series[i].episodeFileCount %>" aria-valuemin="0" aria-valuemax="<%= series[i].episodeCount %>"></div>
                                        <%}%>
                                        
                                    </div>
                                </td>
                            </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- <div class="container-md bg-light text-dark rounded p-2 mt-2">
            <h1 class="text-center">Radarr Information</h1>
        </div> -->
    </body>
</html>